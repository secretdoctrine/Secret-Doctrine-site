= javascript_include_tag 'multimedia_groups/jquery.jplayer'
= stylesheet_link_tag 'multimedia_groups/jplayer.blue.monday'

%div#jplayer_div
%div{:id => "jplayer_container_div", :class => "jp-audio", :role => "application", 'aria-label' => "media player"}
  %div.jp-type-single
    %div{:class=>"jp-gui jp-interface"}
      %div.jp-controls
        %button.jp-play{:role=>"button", :tabindex=>"0"}
          play
        %button.jp-stop{:role=>"button", :tabindex=>"0"}
          stop

      %div.jp-progress
        %div.jp-seek-bar
          %div.jp-play-bar

      %div.jp-volume-controls
        %button.jp-mute{:role=>"button", :tabindex=>"0"}
          mute
        %button.jp-volume-max{:role=>"button", :tabindex=>"0"}
          max volume
        %div.jp-volume-bar
          %div.jp-volume-bar-value

      %div.jp-time-holder
        %div.jp-current-time{:role=>"timer", 'aria-label'=>"time"}
          &nbsp;
        %div.jp-duration{:role=>"timer", 'aria-label'=>"duration"}
          &nbsp;
        %div.jp-toggles
          %button.jp-repeat{:role=>"button", :tabindex=>"0"}
            repeat

    %div.jp-details
      %div.jp-title{'aria-label'=>"title"}
        &nbsp;
    %div.jp-no-solution
      %span
        Update Required
      To play the media you will need to either update your browser to a recent version or update your
      = link_to 'Flash plugin', "http://get.adobe.com/flashplayer/", :target=>"_blank"


:javascript
  function play_file(file, title) {
    $('#jplayer_div').jPlayer({
      swfPath: 'multimedia_groups/jquery.jplayer.swf',
      solution: 'html, flash',
      supplied: 'm4a, oga',
      cssSelectorAncestor: '#jplayer_container_div',
      useStateClassSkin: true
    }).jPlayer('setMedia', {m4a: file, title: title}).jPlayer('play');
  }