= javascript_include_tag 'multimedia_groups/jquery.jplayer'
= stylesheet_link_tag 'multimedia_groups/jplayer-style'
= stylesheet_link_tag 'multimedia_groups/themicons'

%div#jplayer_div
%div#jplayer_container_div{ :class => "jp-audio", :role => "application", 'aria-label' => "media player"}
  %div.jp-type-single
    %div{:class=>"jp-gui jp-interface"}
      %div{ class: "jp-button jp-playpause-button"}
        %button.jp-play{:role=>"button", :tabindex=>"0"}
          play

      %div.jp-time-rail
        %div.jp-progress
          %div.jp-seek-bar{ style: 'width: 100%;'}
            %div.jp-play-bar{ style: 'width: 0%;'}

      %div{ class: 'jp-button jp-volume-button'}
        %button.jp-mute{ role: "button", tabindex: '0'}
          max volume
      %div.jp-volume-bar
        %div{ class: 'jp-volume-bar-value', style: 'width: 80%;'}


:javascript
  function play_file(file, title) {
    $('#jplayer_div').jPlayer({
      swfPath: 'multimedia_groups/jquery.jplayer.swf',
      solution: 'html, flash',
      supplied: 'm4a, oga',
      cssSelectorAncestor: '#jplayer_container_div',
      useStateClassSkin: true
    }).jPlayer('setMedia', {m4a: file, title: title}).jPlayer('play');
  }