= render partial: 'refinery/books/partials/tree_block', :locals => { :display_contents => false, :tree => @tree }

%div{id: 'main_container_div', class: 'fullheight'}
  %div{id: 'library_feed'}
    %table{id: 'category_headers', cols: '*, 200px'}
      %tr
        %td{id: 'book_header'}
          = @category.name
        %td{id: 'search_block'}
          = form_tag refinery.books_search_results_path, {:method => :get, id: 'search_form'} do
            %input{type: :hidden, name: 'book_category_id', value: @category.id}
            %input{type: :hidden, name: 'is_ext_search', value: false, id: 'is_ext_search'}
            %input{id: 'search_lite', name: 'search_text'}
            %a{onclick: '$("#search_form")[0].submit();', class: 'but_24', title: I18n.t('library.search_more_hint')}
              %span.s0
                %span.s1
                  %span.s2
                    = I18n.t('library.search_category')
            %a{onclick: '$("#is_ext_search")[0].value = true; $("#search_form")[0].submit();', class: 'but_24'}
              %span.s0
                %span.s1
                  %span.s2
                    = I18n.t('library.search_more')
    = render partial: 'book_synopsis', collection: @elements, as: :element


= render partial: 'refinery/books/partials/book_view_resize_script'

:javascript

  window.onresize = function() {
    resize();
  };