%div{class: 'pro'}
  %div{class: 'cover'}
    - if element.is_book and element.model.cover_picture
      = link_to element.model.cover_picture.url, {onclick: "return hs.expand(this);"} do
        = image_tag element.model.cover_picture.url
      /= link_to refinery.cover_books_book_path(element.model.id), {'data-lightbox' => "#{element.model.id}"} do
      /  = image_tag refinery.cover_books_book_path(element.model.id)
  %div{class: 'anonce'}
    %h2
      - if element.is_book
        = link_to(element.model.name, refinery.books_book_path(element.model.id))
      - else
        = link_to(element.model.name, refinery.books_book_category_path(element.model.id))
    %p
      = raw element.model.synopsis
  %div{class: 'footer'}
    - if element.is_book
      - pdf_content = element.model.book_file
      - if pdf_content
        %a{class: 'first last', href: pdf_content.file.url}
          %span{class: 's1'}
            %span{class: 's2'}
              =I18n.t('library.download')
      %a{class: 'first last', href: "#{refinery.books_book_path(element.model.id)}"}
        %span{class: 's1'}
          %span{class: 's2'}
            =I18n.t('library.read')
      - if element.model.can_buy
        %a{class: 'first last', href: "#"}
          %span{class: 's1'}
            %span{class: 's2'}
              =I18n.t('library.buy')
    - else
      %a{class: 'first last', href: "#{refinery.books_book_category_path(element.model.id)}"}
        %span{class: 's1'}
          %span{class: 's2'}
            = I18n.t('library.open_subcategory')