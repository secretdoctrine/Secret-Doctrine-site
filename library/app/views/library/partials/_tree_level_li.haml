- tree_element.child_elements.each do |child_element|
  - li_class = child_element.is_open ? 'jstree-open' : nil
  %li{class: "#{li_class}"}
    = link_to controller: child_element.controller, action: child_element.action, id: child_element.id do
      %span{class: 'tree_prefix'}
        = child_element.tree_prefix
      = child_element.name
    - if not child_element.child_elements.empty?
      %ul
        = render partial: 'library/partials/tree_level_li', locals: {tree_element: child_element}
    - if not child_element.data_elements.empty?
      %ul
        = render partial: 'library/partials/tree_data_element', collection: child_element.data_elements, as: :item
= render partial: 'library/partials/tree_data_element', collection: tree_element.data_elements, as: :item