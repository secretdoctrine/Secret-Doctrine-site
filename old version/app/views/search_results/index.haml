- if @result[:too_many_results]
  = I18n.t('library.search_page.too_many_results')

%div{class: :extended_search}
  = form_tag search_results_path, {:method => :get} do
    = hidden_field_tag(:page, params[:page])
    %input{name: 'search_text', value: params[:search_text]}
    %br
    = I18n.t('library.search_page.view_snippet')
    = check_box_tag('show_snippets', 'true', @result[:show_snippets])
    %br
    = I18n.t('library.search_page.search_exact_words')
    = check_box_tag('search_exact_words', 'true', params[:search_exact_words])
    %br
    = I18n.t('library.search_page.ignore_relevance')
    = check_box_tag('ignore_relevance', 'true', params[:ignore_relevance])
    %br
    = I18n.t('library.search_page.results_per_page')
    = number_field_tag('per_page', @result[:per_page], :min => 5, :step => 5)
    %button{type: :submit}
      = I18n.t('library.search')
%div{class: 'search_results_container'}
  %div{class: 'flickr_pagination', style: 'margin-top: 50px;'}
    = will_paginate @result[:search_results]

  = link_to params.merge(show_snippets: false), class: 'but_24' do
    %span.s0
      %span.s1
        %span.s2
          = I18n.t('library.search_page.view_snippet')
  = link_to params.merge(show_snippets: true), class: 'but_24' do
    %span.s0
      %span.s1
        %span.s2
          = I18n.t('library.search_page.view_html')
  = link_to params.merge(action: :export), class: 'but_24' do
    %span.s0
      %span.s1
        %span.s2
          = I18n.t('library.search_page.export')

  - if @result[:show_snippets]
    = render partial: 'search_snippet', collection: @result[:search_results], as: :page
  - else
    = render partial: 'search_html', collection: @result[:search_results], as: :page

  %div{class: 'flickr_pagination'}
    = will_paginate @result[:search_results]
